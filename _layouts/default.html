<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width = device-width, initial-scale = 1.0" />

    <title>
      {% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}
    </title>
    <meta
      name="description"
      content="{{ page.description | default: site.description }}"
    />

    <!-- Open Graph & Twitter Card Meta Tags -->
    <meta
      property="og:title"
      content="{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}"
    />
    <meta
      property="twitter:title"
      content="{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}"
    />

    <meta
      property="og:description"
      content="{{ page.description | default: site.description }}"
    />
    <meta
      property="twitter:description"
      content="{{ page.description | default: site.description }}"
    />

    <meta property="og:url" content="{{ page.url | absolute_url }}" />
    <meta property="og:site_name" content="{{ site.title }}" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="{{ page.image }}" />

    {% if page.image %}
    <meta property="og:image" content="{{ page.image }}" />
    <meta property="twitter:image" content="{{ page.image }}" />
    {% endif %}

    <style>
      {% include critical.css %}
    </style>
    <link
      rel="preload"
      href="{{ '/assets/css/styles.css' | relative_url }}"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="{{ '/assets/css/styles.css' | relative_url }}"
    /></noscript>

    <link rel="favicon" type="image/x-icon" href="/favicon.ico" />
    {% if page.math == true %}
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['\\(','\\)'], ["$$","$$"] ],
          processEscapes: true
        }
      });
    </script>
    <script
      type="text/javascript"
      async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"
    ></script>
    {% endif %}
    <script src="{{ '/assets/js/scroll-progress.js' | relative_url }}"></script>
  </head>
  <body>
    {% include header.html %}
    <div class="scroll-progress">
      <div class="scroll-progress-bar"></div>
    </div>
    <main>
      <div class="content-wrapper">
        <div class="main-content">
          <h1>{{ page.title }}</h1>
          {{ content }} {% if page.footnote_popup %}
          <div id="footnote-popup" class="footnote-popup" aria-label="Footnote">
            <div class="footnote-content"></div>
            <button class="close-btn" aria-label="Close footnote">
              &times;
            </button>
          </div>
          {% endif %}
        </div>
      </div>
    </main>
    <footer><p>{{ site.footer_content }}</p></footer>

    <!-- Conditional Feature Loading -->
    {% if page.footnote_popup %}
    <script src="{{ '/assets/js/footnotes.js' | relative_url }}"></script>
    {% endif %} {% if page.sidebar %}
    <script defer src="{{ '/assets/js/sidebar.js' | relative_url }}"></script>
    {% endif %} {% if page.toc %}
    <script defer src="{{ '/assets/js/toc.js' | relative_url }}"></script>
    {% endif %} {% if page.linechart %}
    <script defer src="{{ '/assets/js/linechart.js' | relative_url }}"></script>
    {% endif %}
  </body>
</html>
